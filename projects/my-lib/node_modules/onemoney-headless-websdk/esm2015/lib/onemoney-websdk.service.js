import { HttpClient, HttpHeaders } from '@angular/common/http';
import { EnvService } from './env.service';
import { map } from 'rxjs/operators';
import { of } from 'rxjs';
import { Injectable } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
import * as i2 from "./env.service";
const APINAME = {
    userProfile: 'user/user-profile',
    discover: 'sdk/api/v1/accounts/discover',
    authtrigger: 'sdk/api/v1/account/auth/trigger',
    accountverify: 'sdk/api/v1/account/auth/verify',
    loginOTPVerify: 'app/loginwithotp/verify',
    accountlist: 'sdk/api/v1/linkedaccount/list',
    discoveredaccountlist: 'sdk/api/v1/discoveredaccount/list',
    logout: 'user/logout',
    loginOTPSend: 'app/loginwithotp/send',
    OTPSend: 'app/otp/send',
    verifyvua: 'user/verifyvua',
    userRegistration: 'user/sdksignupwithotp/send',
    verifyotp: 'user/sdksignupwithotp/verify',
    regascorpuser: 'sdk/api/v1/session/init',
    fipList: 'app/fip',
    // concent approval and rejection.
    customerDashboard: 'app/dashboard',
    consentDetails: 'sdk/api/v1/bulkconsent/info',
    approveConsent: 'sdk/api/v1/consentwithauth/allow',
    rejectConsent: 'sdk/api/v1/consentwithauth/deny',
    consentAllow: 'sdk/api/v1/consent/allow',
    consentDeny: 'sdk/api/v1/consent/deny',
    multiAccountlink: 'sdk/api/v1/bulkaccount/auth/trigger',
    //Phase 3 new APIs
    otpValidate: 'app/otp/validate',
    verifyProfileVua: 'user/verifyprofile',
    //discover API 
    accountdiscover: 'sdk/api/v1/accounts/discover/multiplefips'
};
export class OnemoneyWebsdkService {
    constructor(http, envService) {
        this.http = http;
        this.envService = envService;
        this.url = this.envService.uatUrl;
    }
    /**
     * To discover accounts
     * @param fipId
     * @param identifier
     * @param sessionId
     */
    discoverAccount(fipId, identifier, sessionId) {
        try {
            if (!fipId && !identifier) {
                throw new Error('Flip Id && Identifier is required');
            }
            const sessionID = sessionId || sessionStorage.getItem('sessionId');
            if (!sessionID) {
                throw new Error('Session Id is required');
            }
            const header = new HttpHeaders({
                'Content-Type': 'application/json',
                sessionId: `${sessionID}`
            });
            const options = {
                method: 'POST',
                url: `${this.url}${APINAME.discover}`,
            };
            const data = {
                headers: header,
                body: {
                    identifiers: [{
                            category: `${identifier[0].category}`, type: `${identifier[0].type}`,
                            value: `${identifier[0].value}`
                        }], fipId: `${fipId}`
                }
            };
            return this.http
                .request(options.method, options.url, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
     * To get list of discovered acccounts
     * @param body
     * @param sessionId
     */
    getUserProfile(sessionId) {
        try {
            const sessionID = sessionId || sessionStorage.getItem('sessionId');
            if (!sessionID) {
                throw new Error('Session Id is required');
            }
            const header = new HttpHeaders({
                'Content-Type': 'application/json',
                sessionId: `${sessionID}`
            });
            const options = {
                method: 'GET',
                url: `${this.url}${APINAME.userProfile}`,
            };
            const data = {
                headers: header,
            };
            return this.http
                .request(options.method, options.url, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
     * To auth Trigger accounts // Link Accounts with OTP SEND
     * @param account
     * @param sessionId
     */
    accountAuth(account, sessionId) {
        try {
            if (!account) {
                throw new Error('Account is required');
            }
            const sessionID = sessionId || sessionStorage.getItem('sessionId');
            if (!sessionID) {
                throw new Error('Session Id is required');
            }
            const header = new HttpHeaders({
                'Content-Type': 'application/json',
                sessionId: `${sessionID}`
            });
            const options = {
                method: 'POST',
                url: `${this.url}${APINAME.authtrigger}`,
            };
            const data = {
                headers: header,
                body: {
                    account: {
                        type: `${account.type}`, data: {
                            accType: `${account.data.accType}`,
                            // tslint:disable-next-line: max-line-length
                            accRefNumber: `${account.data.accRefNumber}`, maskedAccNumber: `${account.data.maskedAccNumber}`, fiId: `${account.data.fipId}`, userInfo: `${account.data.userInfo}`
                        }
                    }
                }
            };
            return this.http
                .request(options.method, options.url, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
     * To auth Trigger accounts // Link Accounts with OTP Verify
     * @param refNumber
     * @param authToken
     * @param sessionId
     */
    accountVerify(refNumber, authToken, sessionId) {
        try {
            const sessionID = sessionId || sessionStorage.getItem('sessionId');
            if (!sessionID) {
                throw new Error('Session Id is required');
            }
            const header = new HttpHeaders({
                'Content-Type': 'application/json',
                sessionId: `${sessionID}`,
            });
            const options = {
                method: 'POST',
                url: `${this.url}${APINAME.accountverify}`,
            };
            const data = {
                headers: header,
                body: { refNumber: `${refNumber}`, authToken: `${authToken}` }
            };
            return this.http
                .request(options.method, options.url, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
     * To auth Trigger accounts // Link Accounts with OTP Verify
     * @param organisationId
     * @param client_id
     * @param client_secret
     * @param appIdentifier
     * @param phone_number
     */
    loginOTP(organisationId, client_id, client_secret, appIdentifier, phone_number) {
        try {
            if (!organisationId) {
                throw new Error('organisationId is required');
            }
            const header = new HttpHeaders({
                'Content-Type': 'application/json',
                organisationId: `${organisationId}`,
                client_id: `${client_id}`,
                client_secret: `${client_secret}`,
                appIdentifier: `${appIdentifier}`
            });
            const options = {
                method: 'POST',
                url: `${this.url}${APINAME.loginOTPSend}`,
            };
            const data = {
                headers: header,
                body: { phone_number: `${phone_number}` }
            };
            return this.http
                .request(options.method, options.url, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
     * Login otp validation for a user session, through the SDK // Link Accounts with OTP Verify.
     * @param organisationId
     * @param client_id
     * @param client_secret
     * @param appIdentifier
     * @param phone_number
     * @param otp_reference
     * @param code
     */
    loginOTPVerify(organisationId, client_id, client_secret, appIdentifier, phone_number, otp_reference, code) {
        try {
            if (!organisationId) {
                throw new Error('Session Id is required');
            }
            const header = new HttpHeaders({
                'Content-Type': 'application/json',
                organisationId: `${organisationId}`,
                client_id: `${client_id}`,
                client_secret: `${client_secret}`,
                appIdentifier: `${appIdentifier}`
            });
            const options = {
                method: 'POST',
                url: `${this.url}${APINAME.loginOTPVerify}`,
            };
            const data = {
                headers: header,
                body: { phone_number: `${phone_number}`, otp_reference: `${otp_reference}`, code: `${code}` }
            };
            return this.http
                .request(options.method, options.url, data)
                .pipe(map(res => {
                const response = res;
                if (response.sessionId) {
                    sessionStorage.setItem('sessionId', response.sessionId);
                }
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
     * GET Linked Accounts List.
     * @param sessionId
     * Returns the list of linked accounts by the customer.
     */
    getListOfLinkedAccounts(sessionId) {
        try {
            const sessionID = sessionId || sessionStorage.getItem('sessionId');
            if (!sessionID) {
                throw new Error('Session Id is required');
            }
            const header = new HttpHeaders({
                'Content-Type': 'application/json',
                sessionId: `${sessionID}`
            });
            const options = {
                method: 'GET',
                url: `${this.url}${APINAME.accountlist}`,
            };
            const data = {
                headers: header
            };
            return this.http
                .request(options.method, options.url, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
     * GET Discovered Accounts List
     * @param sessionId
     * Returns the list of discovered accounts.
     */
    getDiscoveredAccountList(sessionId) {
        try {
            const sessionID = sessionId || sessionStorage.getItem('sessionId');
            if (!sessionID) {
                throw new Error('Session Id is required');
            }
            const header = new HttpHeaders({
                'Content-Type': 'application/json',
                sessionId: `${sessionID}`
            });
            const options = {
                method: 'GET',
                url: `${this.url}${APINAME.discoveredaccountlist}`,
            };
            const data = {
                headers: header
            };
            return this.http
                .request(options.method, options.url, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
     * POST Logout // Intended for a consent manager to enable a user to logout of his session.
     * @param sessionId
     */
    logout(sessionId) {
        try {
            const sessionID = sessionId || sessionStorage.getItem('sessionId');
            if (!sessionID) {
                throw new Error('Session Id is required');
            }
            const header = new HttpHeaders({
                'Content-Type': 'application/json',
                sessionId: `${sessionID}`
            });
            const options = {
                method: 'POST',
                url: `${this.url}${APINAME.logout}`,
            };
            const data = {
                headers: header
            };
            return this.http
                .request(options.method, options.url, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
     * Verify uva
     * @param organisationid
     * @param clientId
     * @param clientSecret
     * @param appIdentifier
     * @param body
     */
    verifyVua(organisationid, clientId, clientSecret, appIdentifier, body) {
        try {
            if (!organisationid || !clientId || !clientSecret || !body) {
                throw new Error('All parameters are required');
            }
            const data = {
                headers: new HttpHeaders({
                    'Content-Type': 'application/json',
                    organisationId: organisationid,
                    client_id: clientId,
                    client_secret: clientSecret,
                    appIdentifier: `${appIdentifier}`
                }),
                body: body ? body : null,
            };
            return this.http
                .request('POST', this.url + APINAME.verifyvua, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
     * User Registration
     * @param organisationid
     * @param clientId
     * @param clientSecret
     * @param body
     */
    userRegistration(organisationid, clientId, clientSecret, appIdentifier, body) {
        try {
            if (!organisationid || !clientId || !clientSecret || !body) {
                throw new Error('All parameters are required');
            }
            const data = {
                headers: new HttpHeaders({
                    'Content-Type': 'application/json',
                    organisationId: organisationid,
                    client_id: clientId,
                    client_secret: clientSecret,
                    appIdentifier: `${appIdentifier}`
                }),
                body: body ? body : null,
            };
            return this.http
                .request('POST', this.url + APINAME.userRegistration, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
     * Verify OTP
     * @param organisationid
     * @param clientId
     * @param clientSecret
     * @param body
     */
    verifyOtp(organisationid, clientId, clientSecret, appIdentifier, body) {
        try {
            if (!organisationid || !clientId || !clientSecret || !body) {
                throw new Error('All parameters are required');
            }
            const data = {
                headers: new HttpHeaders({
                    'Content-Type': 'application/json',
                    organisationId: organisationid,
                    client_id: clientId,
                    client_secret: clientSecret,
                    appIdentifier: `${appIdentifier}`
                }),
                body: body ? body : null,
            };
            return this.http
                .request('POST', this.url + APINAME.verifyotp, data)
                .pipe(map(res => {
                const response = res;
                if (response.status && response.sessionId) {
                    sessionStorage.setItem('sessionId', response.sessionId);
                }
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
     * Register as Corporate User.
     * @param body
     */
    registerAsCorpUser(body) {
        try {
            if (!body) {
                throw new Error('All parameters are required');
            }
            const data = {
                headers: new HttpHeaders({
                    'Content-Type': 'application/json',
                }),
                body: body ? body : null,
            };
            return this.http
                .request('POST', this.url + APINAME.regascorpuser, data)
                .pipe(map(res => {
                const response = res;
                if (response.status === 'SUCCESS' && response.sessionToken) {
                    sessionStorage.setItem('sessionToken', response.sessionToken);
                }
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
     * Get FIP List.
     * @param sessionId
     */
    getFipList(sessionId) {
        try {
            const sessionid = sessionId || sessionStorage.getItem('sessionId');
            if (!sessionid) {
                throw new Error('Session Id is required');
            }
            const data = {
                headers: new HttpHeaders({
                    'Content-Type': 'application/json',
                    sessionId: sessionid
                }),
            };
            return this.http
                .request('GET', this.url + APINAME.fipList, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    // concent approval and rejection.
    /**
     * Customer Dashboard/
     * @param sessionId
     */
    customerDashboard(sessionId) {
        try {
            const sessionid = sessionId || sessionStorage.getItem('sessionId');
            if (!sessionid) {
                throw new Error('Session Id is required');
            }
            const data = {
                headers: new HttpHeaders({
                    'Content-Type': 'application/json',
                    sessionId: sessionid
                }),
            };
            return this.http
                .request('GET', this.url + APINAME.customerDashboard, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
     * Consent Request Details
     * @param sessionId
     * @param body
     */
    getConsentDetails(body, sessionId) {
        try {
            const sessionid = sessionId || sessionStorage.getItem('sessionId');
            if (!sessionid || !body) {
                throw new Error('Session Id is required');
            }
            const data = {
                headers: new HttpHeaders({
                    'Content-Type': 'application/json',
                    sessionId: sessionid
                }),
                body: body ? body : null
            };
            return this.http
                .request('POST', this.url + APINAME.consentDetails, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
     * Approve Consent with Authentication
     * @param sessionId
     * @param body
     */
    approve(body, sessionId) {
        try {
            const sessionid = sessionId || sessionStorage.getItem('sessionId');
            if (!sessionid || !body) {
                throw new Error('Session Id is required');
            }
            const data = {
                headers: new HttpHeaders({
                    'Content-Type': 'application/json',
                    sessionId: sessionid
                }),
                body: body ? body : null
            };
            return this.http
                .request('POST', this.url + APINAME.approveConsent, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
     * Reject Consent with Authentication
     * @param sessionId
     * @param body
     */
    reject(body, sessionId) {
        try {
            const sessionid = sessionId || sessionStorage.getItem('sessionId');
            if (!sessionid || !body) {
                throw new Error('Session Id is required');
            }
            const data = {
                headers: new HttpHeaders({
                    'Content-Type': 'application/json',
                    sessionId: sessionid
                }),
                body: body ? body : null
            };
            return this.http
                .request('POST', this.url + APINAME.rejectConsent, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
     * Reject Consent with Authentication
     * @param sessionId
     * @param body
     */
    consentOTP(body, sessionId) {
        try {
            const sessionid = sessionId || sessionStorage.getItem('sessionId');
            if (!sessionid || !body) {
                throw new Error('Session Id is required');
            }
            const data = {
                headers: new HttpHeaders({
                    'Content-Type': 'application/json',
                    sessionId: sessionid
                }),
                body: body ? body : null
            };
            return this.http
                .request('POST', this.url + APINAME.OTPSend, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
     * Consent Allow
     * @param body
     * @param sessionId
     */
    consentAllow(body, sessionId) {
        try {
            const sessionid = sessionId || sessionStorage.getItem('sessionId');
            if (!sessionid || !body) {
                throw new Error('Session Id is required');
            }
            const data = {
                headers: new HttpHeaders({
                    'Content-Type': 'application/json',
                    sessionId: sessionid,
                }),
                body: body ? body : null
            };
            return this.http
                .request('POST', this.url + APINAME.consentAllow, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
     * Consent Deny
     * @param body
     * @param sessionId
     */
    consentDeny(body, sessionId) {
        try {
            const sessionid = sessionId || sessionStorage.getItem('sessionId');
            if (!sessionid || !body) {
                throw new Error('Session Id is required');
            }
            const data = {
                headers: new HttpHeaders({
                    'Content-Type': 'application/json',
                    sessionId: sessionid
                }),
                body: body ? body : null
            };
            return this.http
                .request('POST', this.url + APINAME.consentDeny, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
     * Multi Account Link
     * @param body
     * @param sessionId
     */
    multiAccountlink(body, sessionId) {
        try {
            const sessionid = sessionId || sessionStorage.getItem('sessionId');
            if (!sessionid || !body) {
                throw new Error('Session Id is required');
            }
            const data = {
                headers: new HttpHeaders({
                    'Content-Type': 'application/json',
                    sessionId: sessionid
                }),
                body: body ? body : null
            };
            return this.http
                .request('POST', this.url + APINAME.multiAccountlink, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    // identifierGenerateOTP
    // identifierVerifyOTP
    /**
       * OTP Generation without action Type
       * @param sessionId
       * @param body
       */
    identifierGenerateOTP(body, sessionId) {
        try {
            const sessionid = sessionId || sessionStorage.getItem('sessionId');
            if (!sessionid || !body) {
                throw new Error('Session Id is required');
            }
            const data = {
                headers: new HttpHeaders({
                    'Content-Type': 'application/json',
                    sessionId: sessionid
                }),
                body: body ? Object.assign({ actionType: 'VERIFY_IDENTIFIER' }, body) : null
            };
            return this.http
                .request('POST', this.url + APINAME.OTPSend, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
      * OTP Validation
      * @param body
      * @param sessionId
      */
    identifierVerifyOTP(body, sessionId) {
        try {
            const sessionid = sessionId || sessionStorage.getItem('sessionId');
            if (!sessionid || !body) {
                throw new Error('Session Id is required');
            }
            const data = {
                headers: new HttpHeaders({
                    'Content-Type': 'application/json',
                    sessionId: sessionid
                }),
                body: body ? Object.assign({ actionType: 'VERIFY_IDENTIFIER' }, body) : null
            };
            return this.http
                .request('POST', this.url + APINAME.otpValidate, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
     * Check mobile number VUA
     * @param body
     * @param sessionId
     */
    verifyOnemoneyProfile(organisationid, clientId, clientSecret, appIdentifier, body) {
        try {
            //const sessionid = sessionId || sessionStorage.getItem('sessionId');
            if (!body) {
                throw new Error('Body is required');
            }
            const data = {
                headers: new HttpHeaders({
                    'Content-Type': 'application/json',
                    organisationId: organisationid,
                    client_id: clientId,
                    client_secret: clientSecret,
                    appIdentifier: `${appIdentifier}`,
                }),
                body: body ? body : null
            };
            return this.http
                .request('POST', this.url + APINAME.verifyProfileVua, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
    /**
   * Account discovery API
   * @param body
   * @param sessionId
   */
    discoverAccountFIP(identifier, fipId, sessionId) {
        try {
            if (!identifier) {
                throw new Error('Identifier is required');
            }
            const sessionID = sessionId || sessionStorage.getItem('sessionId');
            if (!sessionID) {
                throw new Error('Session Id is required');
            }
            const header = new HttpHeaders({
                'Content-Type': 'application/json',
                sessionId: `${sessionID}`
            });
            const options = {
                method: 'POST',
                url: `${this.url}${APINAME.accountdiscover}`,
            };
            const data = {
                headers: header,
                body: {
                    identifiers: [{
                            category: `${identifier[0].category}`, type: `${identifier[0].type}`,
                            value: `${identifier[0].value}`
                        }], fipId: `${fipId}`
                }
            };
            return this.http
                .request(options.method, options.url, data)
                .pipe(map(res => {
                const response = res;
                return response;
            }));
        }
        catch (error) {
            return of(error);
        }
    }
}
OnemoneyWebsdkService.ɵprov = i0.ɵɵdefineInjectable({ factory: function OnemoneyWebsdkService_Factory() { return new OnemoneyWebsdkService(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.EnvService)); }, token: OnemoneyWebsdkService, providedIn: "root" });
OnemoneyWebsdkService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] }
];
OnemoneyWebsdkService.ctorParameters = () => [
    { type: HttpClient },
    { type: EnvService }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib25lbW9uZXktd2Vic2RrLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiLi4vLi4vLi4vLi4vcHJvamVjdHMvb25lbW9uZXktaGVhZGxlc3Mtd2Vic2RrL3NyYy8iLCJzb3VyY2VzIjpbImxpYi9vbmVtb25leS13ZWJzZGsuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQy9ELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyxFQUFFLEdBQUcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3JDLE9BQU8sRUFBRSxFQUFFLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDMUIsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQzs7OztBQUczQyxNQUFNLE9BQU8sR0FBRztJQUNkLFdBQVcsRUFBRSxtQkFBbUI7SUFDaEMsUUFBUSxFQUFFLDhCQUE4QjtJQUN4QyxXQUFXLEVBQUUsaUNBQWlDO0lBQzlDLGFBQWEsRUFBRSxnQ0FBZ0M7SUFDL0MsY0FBYyxFQUFFLHlCQUF5QjtJQUN6QyxXQUFXLEVBQUUsK0JBQStCO0lBQzVDLHFCQUFxQixFQUFFLG1DQUFtQztJQUMxRCxNQUFNLEVBQUUsYUFBYTtJQUNyQixZQUFZLEVBQUUsdUJBQXVCO0lBQ3JDLE9BQU8sRUFBQyxjQUFjO0lBRXRCLFNBQVMsRUFBRSxnQkFBZ0I7SUFDM0IsZ0JBQWdCLEVBQUUsNEJBQTRCO0lBQzlDLFNBQVMsRUFBRSw4QkFBOEI7SUFDekMsYUFBYSxFQUFFLHlCQUF5QjtJQUN4QyxPQUFPLEVBQUUsU0FBUztJQUdsQixrQ0FBa0M7SUFDbEMsaUJBQWlCLEVBQUUsZUFBZTtJQUNsQyxjQUFjLEVBQUUsNkJBQTZCO0lBQzdDLGNBQWMsRUFBRSxrQ0FBa0M7SUFDbEQsYUFBYSxFQUFFLGlDQUFpQztJQUVoRCxZQUFZLEVBQUUsMEJBQTBCO0lBQ3hD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LElBQUksQ0FDSCxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQ1IsTUFBTSxRQUFRLEdBQVEsR0FBRyxDQUFDO2dCQUMxQixPQUFPLFFBQVEsQ0FBQztZQUNsQixDQUFDLENBQUMsQ0FDSCxDQUFDO1NBQ0w7UUFBQyxPQUFPLEtBQUssRUFBRTtZQUNkLE9BQU8sRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQ2xCO0lBQ0gsQ0FBQzs7OztZQS80QkYsVUFBVSxTQUFDO2dCQUNWLFVBQVUsRUFBQyxNQUFNO2FBQ2xCOzs7WUEzQ1EsVUFBVTtZQUNWLFVBQVUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwSGVhZGVycyB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcclxuaW1wb3J0IHsgRW52U2VydmljZSB9IGZyb20gJy4vZW52LnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBtYXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IG9mIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcblxyXG5jb25zdCBBUElOQU1FID0ge1xyXG4gIHVzZXJQcm9maWxlOiAndXNlci91c2VyLXByb2ZpbGUnLFxyXG4gIGRpc2NvdmVyOiAnc2RrL2FwaS92MS9hY2NvdW50cy9kaXNjb3ZlcicsXHJcbiAgYXV0aHRyaWdnZXI6ICdzZGsvYXBpL3YxL2FjY291bnQvYXV0aC90cmlnZ2VyJyxcclxuICBhY2NvdW50dmVyaWZ5OiAnc2RrL2FwaS92MS9hY2NvdW50L2F1dGgvdmVyaWZ5JyxcclxuICBsb2dpbk9UUFZlcmlmeTogJ2FwcC9sb2dpbndpdGhvdHAvdmVyaWZ5JyxcclxuICBhY2NvdW50bGlzdDogJ3Nkay9hcGkvdjEvbGlua2VkYWNjb3VudC9saXN0JyxcclxuICBkaXNjb3ZlcmVkYWNjb3VudGxpc3Q6ICdzZGsvYXBpL3YxL2Rpc2NvdmVyZWRhY2NvdW50L2xpc3QnLFxyXG4gIGxvZ291dDogJ3VzZXIvbG9nb3V0JyxcclxuICBsb2dpbk9UUFNlbmQ6ICdhcHAvbG9naW53aXRob3RwL3NlbmQnLFxyXG4gIE9UUFNlbmQ6J2FwcC9vdHAvc2VuZCcsXHJcblxyXG4gIHZlcmlmeXZ1YTogJ3VzZXIvdmVyaWZ5dnVhJyxcclxuICB1c2VyUmVnaXN0cmF0aW9uOiAndXNlci9zZGtzaWdudXB3aXRob3RwL3NlbmQnLFxyXG4gIHZlcmlmeW90cDogJ3VzZXIvc2Rrc2lnbnVwd2l0aG90cC92ZXJpZnknLFxyXG4gIHJlZ2FzY29ycHVzZXI6ICdzZGsvYXBpL3YxL3Nlc3Npb24vaW5pdCcsXHJcbiAgZmlwTGlzdDogJ2FwcC9maXAnLFxyXG4gIFxyXG5cclxuICAvLyBjb25jZW50IGFwcHJvdmFsIGFuZCByZWplY3Rpb24uXHJcbiAgY3VzdG9tZXJEYXNoYm9hcmQ6ICdhcHAvZGFzaGJvYXJkJyxcclxuICBjb25zZW50RGV0YWlsczogJ3Nkay9hcGkvdjEvYnVsa2NvbnNlbnQvaW5mbycsXHJcbiAgYXBwcm92ZUNvbnNlbnQ6ICdzZGsvYXBpL3YxL2NvbnNlbnR3aXRoYXV0aC9hbGxvdycsXHJcbiAgcmVqZWN0Q29uc2VudDogJ3Nkay9hcGkvdjEvY29uc2VudHdpdGhhdXRoL2RlbnknLFxyXG5cclxuICBjb25zZW50QWxsb3c6ICdzZGsvYXBpL3YxL2NvbnNlbnQvYWxsb3cnLFxyXG4gIGNvbnNlbnREZW55OiAnc2RrL2FwaS92MS9jb25zZW50L2RlbnknLFxyXG4gIG11bHRpQWNjb3VudGxpbms6ICdzZGsvYXBpL3YxL2J1bGthY2NvdW50L2F1dGgvdHJpZ2dlcicsXHJcbiAgLy9QaGFzZSAzIG5ldyBBUElzXHJcbiAgb3RwVmFsaWRhdGU6J2FwcC9vdHAvdmFsaWRhdGUnLFxyXG4gIHZlcmlmeVByb2ZpbGVWdWE6J3VzZXIvdmVyaWZ5cHJvZmlsZScsXHJcbiAgLy9kaXNjb3ZlciBBUEkgXHJcbiAgYWNjb3VudGRpc2NvdmVyOidzZGsvYXBpL3YxL2FjY291bnRzL2Rpc2NvdmVyL211bHRpcGxlZmlwcydcclxufTtcclxuQEluamVjdGFibGUoe1xyXG4gIHByb3ZpZGVkSW46J3Jvb3QnXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgT25lbW9uZXlXZWJzZGtTZXJ2aWNlIHtcclxuICB1cmw6IHN0cmluZztcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBodHRwOiBIdHRwQ2xpZW50LCBwcml2YXRlIGVudlNlcnZpY2U6IEVudlNlcnZpY2UpIHtcclxuICAgIHRoaXMudXJsID0gdGhpcy5lbnZTZXJ2aWNlLnVhdFVybDtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBUbyBkaXNjb3ZlciBhY2NvdW50c1xyXG4gICAqIEBwYXJhbSBmaXBJZFxyXG4gICAqIEBwYXJhbSBpZGVudGlmaWVyXHJcbiAgICogQHBhcmFtIHNlc3Npb25JZFxyXG4gICAqL1xyXG4gIGRpc2NvdmVyQWNjb3VudChmaXBJZDogc3RyaW5nLCBpZGVudGlmaWVyOiB7IGNhdGVnb3J5OiBzdHJpbmcsIHR5cGU6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9W10sIHNlc3Npb25JZD86IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCFmaXBJZCAmJiAhaWRlbnRpZmllcikgeyB0aHJvdyBuZXcgRXJyb3IoJ0ZsaXAgSWQgJiYgSWRlbnRpZmllciBpcyByZXF1aXJlZCcpOyB9XHJcbiAgICAgIGNvbnN0IHNlc3Npb25JRCA9IHNlc3Npb25JZCB8fCBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdzZXNzaW9uSWQnKTtcclxuICAgICAgaWYgKCFzZXNzaW9uSUQpIHsgdGhyb3cgbmV3IEVycm9yKCdTZXNzaW9uIElkIGlzIHJlcXVpcmVkJyk7IH1cclxuICAgICAgY29uc3QgaGVhZGVyID0gbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIHNlc3Npb25JZDogYCR7c2Vzc2lvbklEfWBcclxuICAgICAgfSk7XHJcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgdXJsOiBgJHt0aGlzLnVybH0ke0FQSU5BTUUuZGlzY292ZXJ9YCxcclxuICAgICAgfTtcclxuICAgICAgY29uc3QgZGF0YTogYW55ID0ge1xyXG4gICAgICAgIGhlYWRlcnM6IGhlYWRlcixcclxuICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICBpZGVudGlmaWVyczogW3tcclxuICAgICAgICAgICAgY2F0ZWdvcnk6IGAke2lkZW50aWZpZXJbMF0uY2F0ZWdvcnl9YCwgdHlwZTogYCR7aWRlbnRpZmllclswXS50eXBlfWAsXHJcbiAgICAgICAgICAgIHZhbHVlOiBgJHtpZGVudGlmaWVyWzBdLnZhbHVlfWBcclxuICAgICAgICAgIH1dLCBmaXBJZDogYCR7ZmlwSWR9YFxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHRoaXMuaHR0cFxyXG4gICAgICAgIC5yZXF1ZXN0KG9wdGlvbnMubWV0aG9kLCBvcHRpb25zLnVybCwgZGF0YSlcclxuICAgICAgICAucGlwZShcclxuICAgICAgICAgIG1hcChyZXMgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZTogYW55ID0gcmVzO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXR1cm4gb2YoZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVG8gZ2V0IGxpc3Qgb2YgZGlzY292ZXJlZCBhY2Njb3VudHNcclxuICAgKiBAcGFyYW0gYm9keVxyXG4gICAqIEBwYXJhbSBzZXNzaW9uSWRcclxuICAgKi9cclxuICBnZXRVc2VyUHJvZmlsZShzZXNzaW9uSWQ/OiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHNlc3Npb25JRCA9IHNlc3Npb25JZCB8fCBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdzZXNzaW9uSWQnKTtcclxuICAgICAgaWYgKCFzZXNzaW9uSUQpIHsgdGhyb3cgbmV3IEVycm9yKCdTZXNzaW9uIElkIGlzIHJlcXVpcmVkJyk7IH1cclxuICAgICAgY29uc3QgaGVhZGVyID0gbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIHNlc3Npb25JZDogYCR7c2Vzc2lvbklEfWBcclxuICAgICAgfSk7XHJcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICB1cmw6IGAke3RoaXMudXJsfSR7QVBJTkFNRS51c2VyUHJvZmlsZX1gLFxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBkYXRhOiBhbnkgPSB7XHJcbiAgICAgICAgaGVhZGVyczogaGVhZGVyLFxyXG4gICAgICAgIH07XHJcbiAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAucmVxdWVzdChvcHRpb25zLm1ldGhvZCwgb3B0aW9ucy51cmwsIGRhdGEpXHJcbiAgICAgICAgLnBpcGUoXHJcbiAgICAgICAgICBtYXAocmVzID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2U6IGFueSA9IHJlcztcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIG9mKGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogVG8gYXV0aCBUcmlnZ2VyIGFjY291bnRzIC8vIExpbmsgQWNjb3VudHMgd2l0aCBPVFAgU0VORFxyXG4gICAqIEBwYXJhbSBhY2NvdW50XHJcbiAgICogQHBhcmFtIHNlc3Npb25JZFxyXG4gICAqL1xyXG4gIGFjY291bnRBdXRoKGFjY291bnQ6IHtcclxuICAgIHR5cGU6IHN0cmluZywgZGF0YToge1xyXG4gICAgICBhY2NUeXBlOiBzdHJpbmcsIGFjY1JlZk51bWJlcjogc3RyaW5nLFxyXG4gICAgICBtYXNrZWRBY2NOdW1iZXI6IHN0cmluZywgZmlwSWQ6IHN0cmluZywgdXNlckluZm86IHt9XHJcbiAgICB9XHJcbiAgfSwgICAgICAgICAgc2Vzc2lvbklkPzogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoIWFjY291bnQpIHsgdGhyb3cgbmV3IEVycm9yKCdBY2NvdW50IGlzIHJlcXVpcmVkJyk7IH1cclxuICAgICAgY29uc3Qgc2Vzc2lvbklEID0gc2Vzc2lvbklkIHx8IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Nlc3Npb25JZCcpO1xyXG4gICAgICBpZiAoIXNlc3Npb25JRCkgeyB0aHJvdyBuZXcgRXJyb3IoJ1Nlc3Npb24gSWQgaXMgcmVxdWlyZWQnKTsgfVxyXG4gICAgICBjb25zdCBoZWFkZXIgPSBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgc2Vzc2lvbklkOiBgJHtzZXNzaW9uSUR9YFxyXG4gICAgICB9KTtcclxuICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICB1cmw6IGAke3RoaXMudXJsfSR7QVBJTkFNRS5hdXRodHJpZ2dlcn1gLFxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBkYXRhOiBhbnkgPSB7XHJcbiAgICAgICAgaGVhZGVyczogaGVhZGVyLFxyXG4gICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgIGFjY291bnQ6IHtcclxuICAgICAgICAgICAgdHlwZTogYCR7YWNjb3VudC50eXBlfWAsIGRhdGE6IHtcclxuICAgICAgICAgICAgICBhY2NUeXBlOiBgJHthY2NvdW50LmRhdGEuYWNjVHlwZX1gLFxyXG4gICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbWF4LWxpbmUtbGVuZ3RoXHJcbiAgICAgICAgICAgICAgYWNjUmVmTnVtYmVyOiBgJHthY2NvdW50LmRhdGEuYWNjUmVmTnVtYmVyfWAsIG1hc2tlZEFjY051bWJlcjogYCR7YWNjb3VudC5kYXRhLm1hc2tlZEFjY051bWJlcn1gLCBmaUlkOiBgJHthY2NvdW50LmRhdGEuZmlwSWR9YCwgdXNlckluZm86IGAke2FjY291bnQuZGF0YS51c2VySW5mb31gXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAucmVxdWVzdChvcHRpb25zLm1ldGhvZCwgb3B0aW9ucy51cmwsIGRhdGEpXHJcbiAgICAgICAgLnBpcGUoXHJcbiAgICAgICAgICBtYXAocmVzID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2U6IGFueSA9IHJlcztcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIG9mKGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRvIGF1dGggVHJpZ2dlciBhY2NvdW50cyAvLyBMaW5rIEFjY291bnRzIHdpdGggT1RQIFZlcmlmeVxyXG4gICAqIEBwYXJhbSByZWZOdW1iZXJcclxuICAgKiBAcGFyYW0gYXV0aFRva2VuXHJcbiAgICogQHBhcmFtIHNlc3Npb25JZFxyXG4gICAqL1xyXG4gIGFjY291bnRWZXJpZnkocmVmTnVtYmVyOiBzdHJpbmcsIGF1dGhUb2tlbjogc3RyaW5nLCBzZXNzaW9uSWQ/OiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHNlc3Npb25JRCA9IHNlc3Npb25JZCB8fCBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdzZXNzaW9uSWQnKTtcclxuICAgICAgaWYgKCFzZXNzaW9uSUQpIHsgdGhyb3cgbmV3IEVycm9yKCdTZXNzaW9uIElkIGlzIHJlcXVpcmVkJyk7IH1cclxuICAgICAgY29uc3QgaGVhZGVyID0gbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIHNlc3Npb25JZDogYCR7c2Vzc2lvbklEfWAsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICB1cmw6IGAke3RoaXMudXJsfSR7QVBJTkFNRS5hY2NvdW50dmVyaWZ5fWAsXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IGRhdGE6IGFueSA9IHtcclxuICAgICAgICBoZWFkZXJzOiBoZWFkZXIsXHJcbiAgICAgICAgYm9keTogeyByZWZOdW1iZXI6IGAke3JlZk51bWJlcn1gLCBhdXRoVG9rZW46IGAke2F1dGhUb2tlbn1gIH1cclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHRoaXMuaHR0cFxyXG4gICAgICAgIC5yZXF1ZXN0KG9wdGlvbnMubWV0aG9kLCBvcHRpb25zLnVybCwgZGF0YSlcclxuICAgICAgICAucGlwZShcclxuICAgICAgICAgIG1hcChyZXMgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZTogYW55ID0gcmVzO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXR1cm4gb2YoZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVG8gYXV0aCBUcmlnZ2VyIGFjY291bnRzIC8vIExpbmsgQWNjb3VudHMgd2l0aCBPVFAgVmVyaWZ5XHJcbiAgICogQHBhcmFtIG9yZ2FuaXNhdGlvbklkXHJcbiAgICogQHBhcmFtIGNsaWVudF9pZFxyXG4gICAqIEBwYXJhbSBjbGllbnRfc2VjcmV0XHJcbiAgICogQHBhcmFtIGFwcElkZW50aWZpZXJcclxuICAgKiBAcGFyYW0gcGhvbmVfbnVtYmVyXHJcbiAgICovXHJcbiAgbG9naW5PVFAob3JnYW5pc2F0aW9uSWQ6IHN0cmluZywgY2xpZW50X2lkOiBzdHJpbmcsIGNsaWVudF9zZWNyZXQ6IHN0cmluZyxcclxuICAgICAgICAgICBhcHBJZGVudGlmaWVyOlt7IGFwcE5hbWU/OlN0cmluZywgYXBwSWRlbnRpZmllcjogc3RyaW5nIH1dLCBwaG9uZV9udW1iZXI6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCFvcmdhbmlzYXRpb25JZCkgeyB0aHJvdyBuZXcgRXJyb3IoJ29yZ2FuaXNhdGlvbklkIGlzIHJlcXVpcmVkJyk7IH1cclxuICAgICAgY29uc3QgaGVhZGVyID0gbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIG9yZ2FuaXNhdGlvbklkOiBgJHtvcmdhbmlzYXRpb25JZH1gLFxyXG4gICAgICAgIGNsaWVudF9pZDogYCR7Y2xpZW50X2lkfWAsXHJcbiAgICAgICAgY2xpZW50X3NlY3JldDogYCR7Y2xpZW50X3NlY3JldH1gLFxyXG4gICAgICAgIGFwcElkZW50aWZpZXI6IGAke2FwcElkZW50aWZpZXJ9YFxyXG4gICAgICB9KTtcclxuICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICB1cmw6IGAke3RoaXMudXJsfSR7QVBJTkFNRS5sb2dpbk9UUFNlbmR9YCxcclxuICAgICAgfTtcclxuICAgICAgY29uc3QgZGF0YTogYW55ID0ge1xyXG4gICAgICAgIGhlYWRlcnM6IGhlYWRlcixcclxuICAgICAgICBib2R5OiB7IHBob25lX251bWJlcjogYCR7cGhvbmVfbnVtYmVyfWAgfVxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gdGhpcy5odHRwXHJcbiAgICAgICAgLnJlcXVlc3Qob3B0aW9ucy5tZXRob2QsIG9wdGlvbnMudXJsLCBkYXRhKVxyXG4gICAgICAgIC5waXBlKFxyXG4gICAgICAgICAgbWFwKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlOiBhbnkgPSByZXM7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiBvZihlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBMb2dpbiBvdHAgdmFsaWRhdGlvbiBmb3IgYSB1c2VyIHNlc3Npb24sIHRocm91Z2ggdGhlIFNESyAvLyBMaW5rIEFjY291bnRzIHdpdGggT1RQIFZlcmlmeS5cclxuICAgKiBAcGFyYW0gb3JnYW5pc2F0aW9uSWRcclxuICAgKiBAcGFyYW0gY2xpZW50X2lkXHJcbiAgICogQHBhcmFtIGNsaWVudF9zZWNyZXRcclxuICAgKiBAcGFyYW0gYXBwSWRlbnRpZmllclxyXG4gICAqIEBwYXJhbSBwaG9uZV9udW1iZXJcclxuICAgKiBAcGFyYW0gb3RwX3JlZmVyZW5jZVxyXG4gICAqIEBwYXJhbSBjb2RlXHJcbiAgICovXHJcbiAgbG9naW5PVFBWZXJpZnkob3JnYW5pc2F0aW9uSWQ6IHN0cmluZywgY2xpZW50X2lkOiBzdHJpbmcsIGNsaWVudF9zZWNyZXQ6IHN0cmluZyxcclxuICAgICAgICAgICAgICAgICBhcHBJZGVudGlmaWVyOiB7YXBwTmFtZT86IHN0cmluZywgYXBwSWRlbnRpZmllcjogc3RyaW5nIH1bXSwgcGhvbmVfbnVtYmVyOiBzdHJpbmcsIG90cF9yZWZlcmVuY2U6IHN0cmluZywgY29kZTogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoIW9yZ2FuaXNhdGlvbklkKSB7IHRocm93IG5ldyBFcnJvcignU2Vzc2lvbiBJZCBpcyByZXF1aXJlZCcpOyB9XHJcbiAgICAgIGNvbnN0IGhlYWRlciA9IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICBvcmdhbmlzYXRpb25JZDogYCR7b3JnYW5pc2F0aW9uSWR9YCxcclxuICAgICAgICBjbGllbnRfaWQ6IGAke2NsaWVudF9pZH1gLFxyXG4gICAgICAgIGNsaWVudF9zZWNyZXQ6IGAke2NsaWVudF9zZWNyZXR9YCxcclxuICAgICAgICBhcHBJZGVudGlmaWVyOiBgJHthcHBJZGVudGlmaWVyfWBcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIHVybDogYCR7dGhpcy51cmx9JHtBUElOQU1FLmxvZ2luT1RQVmVyaWZ5fWAsXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IGRhdGE6IGFueSA9IHtcclxuICAgICAgICBoZWFkZXJzOiBoZWFkZXIsXHJcbiAgICAgICAgYm9keTogeyBwaG9uZV9udW1iZXI6IGAke3Bob25lX251bWJlcn1gLCBvdHBfcmVmZXJlbmNlOiBgJHtvdHBfcmVmZXJlbmNlfWAsIGNvZGU6IGAke2NvZGV9YCB9XHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAucmVxdWVzdChvcHRpb25zLm1ldGhvZCwgb3B0aW9ucy51cmwsIGRhdGEpXHJcbiAgICAgICAgLnBpcGUoXHJcbiAgICAgICAgICBtYXAocmVzID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2U6IGFueSA9IHJlcztcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnNlc3Npb25JZCkgeyBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdzZXNzaW9uSWQnLCByZXNwb25zZS5zZXNzaW9uSWQpOyB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiBvZihlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHRVQgTGlua2VkIEFjY291bnRzIExpc3QuXHJcbiAgICogQHBhcmFtIHNlc3Npb25JZFxyXG4gICAqIFJldHVybnMgdGhlIGxpc3Qgb2YgbGlua2VkIGFjY291bnRzIGJ5IHRoZSBjdXN0b21lci5cclxuICAgKi9cclxuICBnZXRMaXN0T2ZMaW5rZWRBY2NvdW50cyhzZXNzaW9uSWQ/OiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHNlc3Npb25JRCA9IHNlc3Npb25JZCB8fCBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdzZXNzaW9uSWQnKTtcclxuICAgICAgaWYgKCFzZXNzaW9uSUQpIHsgdGhyb3cgbmV3IEVycm9yKCdTZXNzaW9uIElkIGlzIHJlcXVpcmVkJyk7IH1cclxuICAgICAgY29uc3QgaGVhZGVyID0gbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIHNlc3Npb25JZDogYCR7c2Vzc2lvbklEfWBcclxuICAgICAgfSk7XHJcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICB1cmw6IGAke3RoaXMudXJsfSR7QVBJTkFNRS5hY2NvdW50bGlzdH1gLFxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBkYXRhOiBhbnkgPSB7XHJcbiAgICAgICAgaGVhZGVyczogaGVhZGVyXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAucmVxdWVzdChvcHRpb25zLm1ldGhvZCwgb3B0aW9ucy51cmwsIGRhdGEpXHJcbiAgICAgICAgLnBpcGUoXHJcbiAgICAgICAgICBtYXAocmVzID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2U6IGFueSA9IHJlcztcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIG9mKGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBHRVQgRGlzY292ZXJlZCBBY2NvdW50cyBMaXN0XHJcbiAgICogQHBhcmFtIHNlc3Npb25JZFxyXG4gICAqIFJldHVybnMgdGhlIGxpc3Qgb2YgZGlzY292ZXJlZCBhY2NvdW50cy5cclxuICAgKi9cclxuICBnZXREaXNjb3ZlcmVkQWNjb3VudExpc3Qoc2Vzc2lvbklkPzogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzZXNzaW9uSUQgPSBzZXNzaW9uSWQgfHwgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnc2Vzc2lvbklkJyk7XHJcbiAgICAgIGlmICghc2Vzc2lvbklEKSB7IHRocm93IG5ldyBFcnJvcignU2Vzc2lvbiBJZCBpcyByZXF1aXJlZCcpOyB9XHJcbiAgICAgIGNvbnN0IGhlYWRlciA9IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICBzZXNzaW9uSWQ6IGAke3Nlc3Npb25JRH1gXHJcbiAgICAgIH0pO1xyXG4gICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgdXJsOiBgJHt0aGlzLnVybH0ke0FQSU5BTUUuZGlzY292ZXJlZGFjY291bnRsaXN0fWAsXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IGRhdGE6IGFueSA9IHtcclxuICAgICAgICBoZWFkZXJzOiBoZWFkZXJcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHRoaXMuaHR0cFxyXG4gICAgICAgIC5yZXF1ZXN0KG9wdGlvbnMubWV0aG9kLCBvcHRpb25zLnVybCwgZGF0YSlcclxuICAgICAgICAucGlwZShcclxuICAgICAgICAgIG1hcChyZXMgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZTogYW55ID0gcmVzO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXR1cm4gb2YoZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUE9TVCBMb2dvdXQgLy8gSW50ZW5kZWQgZm9yIGEgY29uc2VudCBtYW5hZ2VyIHRvIGVuYWJsZSBhIHVzZXIgdG8gbG9nb3V0IG9mIGhpcyBzZXNzaW9uLlxyXG4gICAqIEBwYXJhbSBzZXNzaW9uSWRcclxuICAgKi9cclxuICBsb2dvdXQoc2Vzc2lvbklkPzogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzZXNzaW9uSUQgPSBzZXNzaW9uSWQgfHwgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnc2Vzc2lvbklkJyk7XHJcbiAgICAgIGlmICghc2Vzc2lvbklEKSB7IHRocm93IG5ldyBFcnJvcignU2Vzc2lvbiBJZCBpcyByZXF1aXJlZCcpOyB9XHJcbiAgICAgIGNvbnN0IGhlYWRlciA9IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICBzZXNzaW9uSWQ6IGAke3Nlc3Npb25JRH1gXHJcbiAgICAgIH0pO1xyXG4gICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIHVybDogYCR7dGhpcy51cmx9JHtBUElOQU1FLmxvZ291dH1gLFxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBkYXRhOiBhbnkgPSB7XHJcbiAgICAgICAgaGVhZGVyczogaGVhZGVyXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAucmVxdWVzdChvcHRpb25zLm1ldGhvZCwgb3B0aW9ucy51cmwsIGRhdGEpXHJcbiAgICAgICAgLnBpcGUoXHJcbiAgICAgICAgICBtYXAocmVzID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2U6IGFueSA9IHJlcztcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIG9mKGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFZlcmlmeSB1dmFcclxuICAgKiBAcGFyYW0gb3JnYW5pc2F0aW9uaWRcclxuICAgKiBAcGFyYW0gY2xpZW50SWRcclxuICAgKiBAcGFyYW0gY2xpZW50U2VjcmV0XHJcbiAgICogQHBhcmFtIGFwcElkZW50aWZpZXJcclxuICAgKiBAcGFyYW0gYm9keVxyXG4gICAqL1xyXG4gIHZlcmlmeVZ1YShvcmdhbmlzYXRpb25pZDogc3RyaW5nLCBjbGllbnRJZDogc3RyaW5nLCBjbGllbnRTZWNyZXQ6IHN0cmluZywgYXBwSWRlbnRpZmllcjogeyBhcHBOYW1lPzogc3RyaW5nLCBhcHBJZGVudGlmaWVyOiBzdHJpbmcgfVtdLFxyXG4gICAgICAgICAgICBib2R5OiB7IHZ1YTogc3RyaW5nIH0pOiBhbnkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCFvcmdhbmlzYXRpb25pZCB8fCAhY2xpZW50SWQgfHwgIWNsaWVudFNlY3JldCB8fCAhYm9keSkgeyB0aHJvdyBuZXcgRXJyb3IoJ0FsbCBwYXJhbWV0ZXJzIGFyZSByZXF1aXJlZCcpOyB9XHJcbiAgICAgIGNvbnN0IGRhdGE6IGFueSA9IHtcclxuICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgIG9yZ2FuaXNhdGlvbklkOiBvcmdhbmlzYXRpb25pZCxcclxuICAgICAgICAgIGNsaWVudF9pZDogY2xpZW50SWQsXHJcbiAgICAgICAgICBjbGllbnRfc2VjcmV0OiBjbGllbnRTZWNyZXQsXHJcbiAgICAgICAgICBhcHBJZGVudGlmaWVyOiBgJHthcHBJZGVudGlmaWVyfWBcclxuICAgICAgICB9KSxcclxuICAgICAgICBib2R5OiBib2R5ID8gYm9keSA6IG51bGwsXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAucmVxdWVzdCgnUE9TVCcsIHRoaXMudXJsICsgQVBJTkFNRS52ZXJpZnl2dWEsIGRhdGEpXHJcbiAgICAgICAgLnBpcGUoXHJcbiAgICAgICAgICBtYXAocmVzID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2U6IGFueSA9IHJlcztcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIG9mKGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVzZXIgUmVnaXN0cmF0aW9uXHJcbiAgICogQHBhcmFtIG9yZ2FuaXNhdGlvbmlkXHJcbiAgICogQHBhcmFtIGNsaWVudElkXHJcbiAgICogQHBhcmFtIGNsaWVudFNlY3JldFxyXG4gICAqIEBwYXJhbSBib2R5XHJcbiAgICovXHJcbiAgdXNlclJlZ2lzdHJhdGlvbihvcmdhbmlzYXRpb25pZDogc3RyaW5nLCBjbGllbnRJZDogc3RyaW5nLCBjbGllbnRTZWNyZXQ6IHN0cmluZyxcclxuICAgICAgICAgICAgICAgICAgIGFwcElkZW50aWZpZXI6IHsgYXBwTmFtZT86IHN0cmluZywgYXBwSWRlbnRpZmllcjogc3RyaW5nIH1bXSwgYm9keToge1xyXG4gICAgICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nLCBwaG9uZV9udW1iZXI6IHN0cmluZywgdGVybXNfYW5kX2NvbmRpdGlvbnM6IGJvb2xlYW4sIHZ1YTogc3RyaW5nIH0pOiBhbnkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCFvcmdhbmlzYXRpb25pZCB8fCAhY2xpZW50SWQgfHwgIWNsaWVudFNlY3JldCB8fCAhYm9keSkgeyB0aHJvdyBuZXcgRXJyb3IoJ0FsbCBwYXJhbWV0ZXJzIGFyZSByZXF1aXJlZCcpOyB9XHJcbiAgICAgIGNvbnN0IGRhdGE6IGFueSA9IHtcclxuICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgIG9yZ2FuaXNhdGlvbklkOiBvcmdhbmlzYXRpb25pZCxcclxuICAgICAgICAgIGNsaWVudF9pZDogY2xpZW50SWQsXHJcbiAgICAgICAgICBjbGllbnRfc2VjcmV0OiBjbGllbnRTZWNyZXQsXHJcbiAgICAgICAgICBhcHBJZGVudGlmaWVyOiBgJHthcHBJZGVudGlmaWVyfWBcclxuICAgICAgICB9KSxcclxuICAgICAgICBib2R5OiBib2R5ID8gYm9keSA6IG51bGwsXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAucmVxdWVzdCgnUE9TVCcsIHRoaXMudXJsICsgQVBJTkFNRS51c2VyUmVnaXN0cmF0aW9uLCBkYXRhKVxyXG4gICAgICAgIC5waXBlKFxyXG4gICAgICAgICAgbWFwKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlOiBhbnkgPSByZXM7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiBvZihlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBWZXJpZnkgT1RQXHJcbiAgICogQHBhcmFtIG9yZ2FuaXNhdGlvbmlkXHJcbiAgICogQHBhcmFtIGNsaWVudElkXHJcbiAgICogQHBhcmFtIGNsaWVudFNlY3JldFxyXG4gICAqIEBwYXJhbSBib2R5XHJcbiAgICovXHJcbiAgdmVyaWZ5T3RwKG9yZ2FuaXNhdGlvbmlkOiBzdHJpbmcsIGNsaWVudElkOiBzdHJpbmcsIGNsaWVudFNlY3JldDogc3RyaW5nLFxyXG4gICAgICAgICAgICBhcHBJZGVudGlmaWVyOiB7IGFwcE5hbWU/OiBzdHJpbmcsIGFwcElkZW50aWZpZXI6IHN0cmluZyB9W10sXHJcbiAgICAgICAgICAgIGJvZHk6IHsgcGhvbmVfbnVtYmVyOiBzdHJpbmcsIG90cF9yZWZlcmVuY2U6IHN0cmluZywgY29kZTogc3RyaW5nIH0pOiBhbnkge1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICghb3JnYW5pc2F0aW9uaWQgfHwgIWNsaWVudElkIHx8ICFjbGllbnRTZWNyZXQgfHwgIWJvZHkpIHsgdGhyb3cgbmV3IEVycm9yKCdBbGwgcGFyYW1ldGVycyBhcmUgcmVxdWlyZWQnKTsgfVxyXG4gICAgICBjb25zdCBkYXRhOiBhbnkgPSB7XHJcbiAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICBvcmdhbmlzYXRpb25JZDogb3JnYW5pc2F0aW9uaWQsXHJcbiAgICAgICAgICBjbGllbnRfaWQ6IGNsaWVudElkLFxyXG4gICAgICAgICAgY2xpZW50X3NlY3JldDogY2xpZW50U2VjcmV0LFxyXG4gICAgICAgICAgYXBwSWRlbnRpZmllcjogYCR7YXBwSWRlbnRpZmllcn1gXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgYm9keTogYm9keSA/IGJvZHkgOiBudWxsLFxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gdGhpcy5odHRwXHJcbiAgICAgICAgLnJlcXVlc3QoJ1BPU1QnLCB0aGlzLnVybCArIEFQSU5BTUUudmVyaWZ5b3RwLCBkYXRhKVxyXG4gICAgICAgIC5waXBlKFxyXG4gICAgICAgICAgbWFwKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlOiBhbnkgPSByZXM7XHJcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgJiYgcmVzcG9uc2Uuc2Vzc2lvbklkKSB7XHJcbiAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnc2Vzc2lvbklkJywgcmVzcG9uc2Uuc2Vzc2lvbklkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXR1cm4gb2YoZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVnaXN0ZXIgYXMgQ29ycG9yYXRlIFVzZXIuXHJcbiAgICogQHBhcmFtIGJvZHlcclxuICAgKi9cclxuICByZWdpc3RlckFzQ29ycFVzZXIoYm9keTogeyBtb2JpbGVOdW1iZXI6IHN0cmluZywgdGltZXN0YW1wOiBzdHJpbmcsIHBhbjogc3RyaW5nIH0pOiBhbnkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCFib2R5KSB7IHRocm93IG5ldyBFcnJvcignQWxsIHBhcmFtZXRlcnMgYXJlIHJlcXVpcmVkJyk7IH1cclxuICAgICAgY29uc3QgZGF0YTogYW55ID0ge1xyXG4gICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIGJvZHk6IGJvZHkgPyBib2R5IDogbnVsbCxcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHRoaXMuaHR0cFxyXG4gICAgICAgIC5yZXF1ZXN0KCdQT1NUJywgdGhpcy51cmwgKyBBUElOQU1FLnJlZ2FzY29ycHVzZXIsIGRhdGEpXHJcbiAgICAgICAgLnBpcGUoXHJcbiAgICAgICAgICBtYXAocmVzID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2U6IGFueSA9IHJlcztcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gJ1NVQ0NFU1MnICYmIHJlc3BvbnNlLnNlc3Npb25Ub2tlbikge1xyXG4gICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3Nlc3Npb25Ub2tlbicsIHJlc3BvbnNlLnNlc3Npb25Ub2tlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIG9mKGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBGSVAgTGlzdC5cclxuICAgKiBAcGFyYW0gc2Vzc2lvbklkXHJcbiAgICovXHJcbiAgZ2V0RmlwTGlzdChzZXNzaW9uSWQ/OiBzdHJpbmcpOiBhbnkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc2Vzc2lvbmlkID0gc2Vzc2lvbklkIHx8IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Nlc3Npb25JZCcpO1xyXG4gICAgICBpZiAoIXNlc3Npb25pZCkgeyB0aHJvdyBuZXcgRXJyb3IoJ1Nlc3Npb24gSWQgaXMgcmVxdWlyZWQnKTsgfVxyXG4gICAgICBjb25zdCBkYXRhOiBhbnkgPSB7XHJcbiAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICBzZXNzaW9uSWQ6IHNlc3Npb25pZFxyXG4gICAgICAgIH0pLFxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gdGhpcy5odHRwXHJcbiAgICAgICAgLnJlcXVlc3QoJ0dFVCcsIHRoaXMudXJsICsgQVBJTkFNRS5maXBMaXN0LCBkYXRhKVxyXG4gICAgICAgIC5waXBlKFxyXG4gICAgICAgICAgbWFwKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlOiBhbnkgPSByZXM7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiBvZihlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gY29uY2VudCBhcHByb3ZhbCBhbmQgcmVqZWN0aW9uLlxyXG5cclxuICAvKipcclxuICAgKiBDdXN0b21lciBEYXNoYm9hcmQvXHJcbiAgICogQHBhcmFtIHNlc3Npb25JZFxyXG4gICAqL1xyXG4gIGN1c3RvbWVyRGFzaGJvYXJkKHNlc3Npb25JZD86IHN0cmluZyk6IGFueSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzZXNzaW9uaWQgPSBzZXNzaW9uSWQgfHwgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnc2Vzc2lvbklkJyk7XHJcbiAgICAgIGlmICghc2Vzc2lvbmlkKSB7IHRocm93IG5ldyBFcnJvcignU2Vzc2lvbiBJZCBpcyByZXF1aXJlZCcpOyB9XHJcbiAgICAgIGNvbnN0IGRhdGE6IGFueSA9IHtcclxuICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgIHNlc3Npb25JZDogc2Vzc2lvbmlkXHJcbiAgICAgICAgfSksXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAucmVxdWVzdCgnR0VUJywgdGhpcy51cmwgKyBBUElOQU1FLmN1c3RvbWVyRGFzaGJvYXJkLCBkYXRhKVxyXG4gICAgICAgIC5waXBlKFxyXG4gICAgICAgICAgbWFwKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlOiBhbnkgPSByZXM7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiBvZihlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQ29uc2VudCBSZXF1ZXN0IERldGFpbHNcclxuICAgKiBAcGFyYW0gc2Vzc2lvbklkXHJcbiAgICogQHBhcmFtIGJvZHlcclxuICAgKi9cclxuICBnZXRDb25zZW50RGV0YWlscyhib2R5OiB7IGNvbnNlbnRIYW5kbGVzOiBzdHJpbmdbXSB9LCBzZXNzaW9uSWQ/OiBzdHJpbmcpOiBhbnkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc2Vzc2lvbmlkID0gc2Vzc2lvbklkIHx8IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Nlc3Npb25JZCcpO1xyXG4gICAgICBpZiAoIXNlc3Npb25pZCB8fCAhYm9keSkgeyB0aHJvdyBuZXcgRXJyb3IoJ1Nlc3Npb24gSWQgaXMgcmVxdWlyZWQnKTsgfVxyXG4gICAgICBjb25zdCBkYXRhOiBhbnkgPSB7XHJcbiAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICBzZXNzaW9uSWQ6IHNlc3Npb25pZFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIGJvZHk6IGJvZHkgPyBib2R5IDogbnVsbFxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gdGhpcy5odHRwXHJcbiAgICAgICAgLnJlcXVlc3QoJ1BPU1QnLCB0aGlzLnVybCArIEFQSU5BTUUuY29uc2VudERldGFpbHMsIGRhdGEpXHJcbiAgICAgICAgLnBpcGUoXHJcbiAgICAgICAgICBtYXAocmVzID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2U6IGFueSA9IHJlcztcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIG9mKGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBBcHByb3ZlIENvbnNlbnQgd2l0aCBBdXRoZW50aWNhdGlvblxyXG4gICAqIEBwYXJhbSBzZXNzaW9uSWRcclxuICAgKiBAcGFyYW0gYm9keVxyXG4gICAqL1xyXG4gIGFwcHJvdmUoYm9keToge2NvbnNlbnRIYW5kbGU6IHN0cmluZywgb3RwOiBzdHJpbmcsIGFjY291bnRzOiB7dHlwZTogc3RyaW5nLCBkYXRhOiB7YWNjVHlwZTogc3RyaW5nLFxyXG4gICAgICAgICAgYWNjUmVmTnVtYmVyOiBzdHJpbmcsIG1hc2tlZEFjY051bWJlcjogc3RyaW5nLCBmaXBJZDogc3RyaW5nLCB1c2VySW5mbzoge319fVtdfSxcclxuICAgICAgICAgIHNlc3Npb25JZD86IHN0cmluZyk6IGFueSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzZXNzaW9uaWQgPSBzZXNzaW9uSWQgfHwgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnc2Vzc2lvbklkJyk7XHJcbiAgICAgIGlmICghc2Vzc2lvbmlkIHx8ICFib2R5KSB7IHRocm93IG5ldyBFcnJvcignU2Vzc2lvbiBJZCBpcyByZXF1aXJlZCcpOyB9XHJcbiAgICAgIGNvbnN0IGRhdGE6IGFueSA9IHtcclxuICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgIHNlc3Npb25JZDogc2Vzc2lvbmlkXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgYm9keTogYm9keSA/IGJvZHkgOiBudWxsXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAucmVxdWVzdCgnUE9TVCcsIHRoaXMudXJsICsgQVBJTkFNRS5hcHByb3ZlQ29uc2VudCwgZGF0YSlcclxuICAgICAgICAucGlwZShcclxuICAgICAgICAgIG1hcChyZXMgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZTogYW55ID0gcmVzO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXR1cm4gb2YoZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZWplY3QgQ29uc2VudCB3aXRoIEF1dGhlbnRpY2F0aW9uXHJcbiAgICogQHBhcmFtIHNlc3Npb25JZFxyXG4gICAqIEBwYXJhbSBib2R5XHJcbiAgICovXHJcbiAgcmVqZWN0KGJvZHk6IHsgY29uc2VudEhhbmRsZTogc3RyaW5nLCBvdHA6IHN0cmluZyB9LCBzZXNzaW9uSWQ/OiBzdHJpbmcpOiBhbnkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc2Vzc2lvbmlkID0gc2Vzc2lvbklkIHx8IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Nlc3Npb25JZCcpO1xyXG4gICAgICBpZiAoIXNlc3Npb25pZCB8fCAhYm9keSkgeyB0aHJvdyBuZXcgRXJyb3IoJ1Nlc3Npb24gSWQgaXMgcmVxdWlyZWQnKTsgfVxyXG4gICAgICBjb25zdCBkYXRhOiBhbnkgPSB7XHJcbiAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICBzZXNzaW9uSWQ6IHNlc3Npb25pZFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIGJvZHk6IGJvZHkgPyBib2R5IDogbnVsbFxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gdGhpcy5odHRwXHJcbiAgICAgICAgLnJlcXVlc3QoJ1BPU1QnLCB0aGlzLnVybCArIEFQSU5BTUUucmVqZWN0Q29uc2VudCwgZGF0YSlcclxuICAgICAgICAucGlwZShcclxuICAgICAgICAgIG1hcChyZXMgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZTogYW55ID0gcmVzO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXR1cm4gb2YoZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVqZWN0IENvbnNlbnQgd2l0aCBBdXRoZW50aWNhdGlvblxyXG4gICAqIEBwYXJhbSBzZXNzaW9uSWRcclxuICAgKiBAcGFyYW0gYm9keVxyXG4gICAqL1xyXG4gIGNvbnNlbnRPVFAoYm9keTogeyBhY3Rpb25UeXBlOiBzdHJpbmcsaWRlbnRpZmllclZhbHVlOnN0cmluZyxpZGVudGlmaWVyVHlwZTpzdHJpbmcgfSwgc2Vzc2lvbklkPzogc3RyaW5nKTogYW55IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHNlc3Npb25pZCA9IHNlc3Npb25JZCB8fCBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdzZXNzaW9uSWQnKTtcclxuICAgICAgaWYgKCFzZXNzaW9uaWQgfHwgIWJvZHkpIHsgdGhyb3cgbmV3IEVycm9yKCdTZXNzaW9uIElkIGlzIHJlcXVpcmVkJyk7IH1cclxuICAgICAgY29uc3QgZGF0YTogYW55ID0ge1xyXG4gICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uaWRcclxuICAgICAgICB9KSxcclxuICAgICAgICBib2R5OiBib2R5ID8gYm9keSA6IG51bGxcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHRoaXMuaHR0cFxyXG4gICAgICAgIC5yZXF1ZXN0KCdQT1NUJywgdGhpcy51cmwgKyBBUElOQU1FLk9UUFNlbmQsIGRhdGEpXHJcbiAgICAgICAgLnBpcGUoXHJcbiAgICAgICAgICBtYXAocmVzID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2U6IGFueSA9IHJlcztcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIG9mKGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gXHJcbiAgLyoqXHJcbiAgICogQ29uc2VudCBBbGxvd1xyXG4gICAqIEBwYXJhbSBib2R5XHJcbiAgICogQHBhcmFtIHNlc3Npb25JZFxyXG4gICAqL1xyXG4gIGNvbnNlbnRBbGxvdyhib2R5OiB7IGNvbnNlbnRIYW5kbGU6IHN0cmluZyxcclxuICAgIGFjY291bnRzOiB7XHJcbiAgICAgICAgdHlwZTogc3RyaW5nLFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIGFjY1R5cGU6IHN0cmluZyxcclxuICAgICAgICAgIGFjY1JlZk51bWJlcjogc3RyaW5nLFxyXG4gICAgICAgICAgbWFza2VkQWNjTnVtYmVyOiBzdHJpbmcsXHJcbiAgICAgICAgICBmaXBJZDogc3RyaW5nLFxyXG4gICAgICAgICAgdXNlckluZm86IHt9fVxyXG4gICAgICB9W119LCBzZXNzaW9uSWQ/OiBzdHJpbmcpOiBhbnkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc2Vzc2lvbmlkID0gc2Vzc2lvbklkIHx8IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Nlc3Npb25JZCcpO1xyXG4gICAgICBpZiAoIXNlc3Npb25pZCB8fCAhYm9keSkgeyB0aHJvdyBuZXcgRXJyb3IoJ1Nlc3Npb24gSWQgaXMgcmVxdWlyZWQnKTsgfVxyXG4gICAgICBjb25zdCBkYXRhOiBhbnkgPSB7XHJcbiAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICBzZXNzaW9uSWQ6IHNlc3Npb25pZCxcclxuICAgICAgICB9KSxcclxuICAgICAgICBib2R5OiBib2R5ID8gYm9keSA6IG51bGxcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHRoaXMuaHR0cFxyXG4gICAgICAgIC5yZXF1ZXN0KCdQT1NUJyx0aGlzLnVybCArIEFQSU5BTUUuY29uc2VudEFsbG93LCBkYXRhKVxyXG4gICAgICAgIC5waXBlKFxyXG4gICAgICAgICAgbWFwKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlOiBhbnkgPSByZXM7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiBvZihlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQ29uc2VudCBEZW55XHJcbiAgICogQHBhcmFtIGJvZHlcclxuICAgKiBAcGFyYW0gc2Vzc2lvbklkXHJcbiAgICovXHJcbiAgY29uc2VudERlbnkoYm9keTogeyBjb25zZW50SGFuZGxlOiBzdHJpbmd9LCBzZXNzaW9uSWQ/OiBzdHJpbmcpOiBhbnkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc2Vzc2lvbmlkID0gc2Vzc2lvbklkIHx8IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Nlc3Npb25JZCcpO1xyXG4gICAgICBpZiAoIXNlc3Npb25pZCB8fCAhYm9keSkgeyB0aHJvdyBuZXcgRXJyb3IoJ1Nlc3Npb24gSWQgaXMgcmVxdWlyZWQnKTsgfVxyXG4gICAgICBjb25zdCBkYXRhOiBhbnkgPSB7XHJcbiAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICBzZXNzaW9uSWQ6IHNlc3Npb25pZFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIGJvZHk6IGJvZHkgPyBib2R5IDogbnVsbFxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gdGhpcy5odHRwXHJcbiAgICAgICAgLnJlcXVlc3QoJ1BPU1QnLCB0aGlzLnVybCArIEFQSU5BTUUuY29uc2VudERlbnksIGRhdGEpXHJcbiAgICAgICAgLnBpcGUoXHJcbiAgICAgICAgICBtYXAocmVzID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2U6IGFueSA9IHJlcztcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIG9mKGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBNdWx0aSBBY2NvdW50IExpbmtcclxuICAgKiBAcGFyYW0gYm9keVxyXG4gICAqIEBwYXJhbSBzZXNzaW9uSWRcclxuICAgKi9cclxuICBtdWx0aUFjY291bnRsaW5rKGJvZHk6IHsgXHJcbiAgICBhY2NvdW50czoge1xyXG4gICAgICAgIHR5cGU6IHN0cmluZyxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBhY2NUeXBlOiBzdHJpbmcsXHJcbiAgICAgICAgICBhY2NSZWZOdW1iZXI6IHN0cmluZyxcclxuICAgICAgICAgIG1hc2tlZEFjY051bWJlcjogc3RyaW5nLFxyXG4gICAgICAgICAgZmlwSWQ6IHN0cmluZyxcclxuICAgICAgICAgIHVzZXJJbmZvOiB7fX1cclxuICAgICAgfVtdfSwgc2Vzc2lvbklkPzogc3RyaW5nKTogYW55IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHNlc3Npb25pZCA9IHNlc3Npb25JZCB8fCBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdzZXNzaW9uSWQnKTtcclxuICAgICAgaWYgKCFzZXNzaW9uaWQgfHwgIWJvZHkpIHsgdGhyb3cgbmV3IEVycm9yKCdTZXNzaW9uIElkIGlzIHJlcXVpcmVkJyk7IH1cclxuICAgICAgY29uc3QgZGF0YTogYW55ID0ge1xyXG4gICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uaWRcclxuICAgICAgICB9KSxcclxuICAgICAgICBib2R5OiBib2R5ID8gYm9keSA6IG51bGxcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHRoaXMuaHR0cFxyXG4gICAgICAgIC5yZXF1ZXN0KCdQT1NUJywgdGhpcy51cmwgKyBBUElOQU1FLm11bHRpQWNjb3VudGxpbmssIGRhdGEpXHJcbiAgICAgICAgLnBpcGUoXHJcbiAgICAgICAgICBtYXAocmVzID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2U6IGFueSA9IHJlcztcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIG9mKGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcbi8vIGlkZW50aWZpZXJHZW5lcmF0ZU9UUFxyXG4vLyBpZGVudGlmaWVyVmVyaWZ5T1RQXHJcbi8qKlxyXG4gICAqIE9UUCBHZW5lcmF0aW9uIHdpdGhvdXQgYWN0aW9uIFR5cGVcclxuICAgKiBAcGFyYW0gc2Vzc2lvbklkXHJcbiAgICogQHBhcmFtIGJvZHlcclxuICAgKi9cclxuICBpZGVudGlmaWVyR2VuZXJhdGVPVFAoYm9keTogeyBpZGVudGlmaWVyVmFsdWU6c3RyaW5nLGlkZW50aWZpZXJUeXBlOnN0cmluZyB9LCBzZXNzaW9uSWQ/OiBzdHJpbmcpOiBhbnkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc2Vzc2lvbmlkID0gc2Vzc2lvbklkIHx8IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Nlc3Npb25JZCcpO1xyXG4gICAgICBpZiAoIXNlc3Npb25pZCB8fCAhYm9keSkgeyB0aHJvdyBuZXcgRXJyb3IoJ1Nlc3Npb24gSWQgaXMgcmVxdWlyZWQnKTsgfVxyXG4gICAgICBjb25zdCBkYXRhOiBhbnkgPSB7XHJcbiAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICBzZXNzaW9uSWQ6IHNlc3Npb25pZFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIGJvZHk6IGJvZHkgPyB7YWN0aW9uVHlwZTonVkVSSUZZX0lERU5USUZJRVInLCAuLi5ib2R5IH0gOiBudWxsXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAucmVxdWVzdCgnUE9TVCcsIHRoaXMudXJsICsgQVBJTkFNRS5PVFBTZW5kLCBkYXRhKVxyXG4gICAgICAgIC5waXBlKFxyXG4gICAgICAgICAgbWFwKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlOiBhbnkgPSByZXM7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiBvZihlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuIC8qKlxyXG4gICAqIE9UUCBWYWxpZGF0aW9uXHJcbiAgICogQHBhcmFtIGJvZHlcclxuICAgKiBAcGFyYW0gc2Vzc2lvbklkXHJcbiAgICovXHJcbiAgaWRlbnRpZmllclZlcmlmeU9UUChib2R5OiB7IFxyXG4gICAgYWN0aW9uVHlwZTpTdHJpbmcsXHJcbiAgICBPVFA6U3RyaW5nLFxyXG4gICAgaWRlbnRpZmllclZhbHVlOlN0cmluZyxcclxuICAgIGlkZW50aWZpZXJUeXBlOnN0cmluZ1xyXG4gICAgfSwgc2Vzc2lvbklkPzogc3RyaW5nKTogYW55IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHNlc3Npb25pZCA9IHNlc3Npb25JZCB8fCBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdzZXNzaW9uSWQnKTtcclxuICAgICAgaWYgKCFzZXNzaW9uaWQgfHwgIWJvZHkpIHsgdGhyb3cgbmV3IEVycm9yKCdTZXNzaW9uIElkIGlzIHJlcXVpcmVkJyk7IH1cclxuICAgICAgY29uc3QgZGF0YTogYW55ID0ge1xyXG4gICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uaWRcclxuICAgICAgICB9KSxcclxuICAgICAgICBib2R5OiBib2R5ID8ge2FjdGlvblR5cGU6J1ZFUklGWV9JREVOVElGSUVSJywgLi4uYm9keSB9IDogbnVsbFxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gdGhpcy5odHRwXHJcbiAgICAgICAgLnJlcXVlc3QoJ1BPU1QnLCB0aGlzLnVybCArIEFQSU5BTUUub3RwVmFsaWRhdGUsIGRhdGEpXHJcbiAgICAgICAgLnBpcGUoXHJcbiAgICAgICAgICBtYXAocmVzID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2U6IGFueSA9IHJlcztcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIG9mKGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogQ2hlY2sgbW9iaWxlIG51bWJlciBWVUFcclxuICAgKiBAcGFyYW0gYm9keVxyXG4gICAqIEBwYXJhbSBzZXNzaW9uSWRcclxuICAgKi9cclxuICB2ZXJpZnlPbmVtb25leVByb2ZpbGUob3JnYW5pc2F0aW9uaWQ6IHN0cmluZywgY2xpZW50SWQ6IHN0cmluZywgY2xpZW50U2VjcmV0OiBzdHJpbmcsXHJcbiAgICBhcHBJZGVudGlmaWVyOiB7IGFwcE5hbWU/OiBzdHJpbmcsIGFwcElkZW50aWZpZXI6IHN0cmluZyB9W10sXHJcbiAgICBib2R5OiB7IHVzZXJuYW1lOiBzdHJpbmcsIH0pOiBhbnkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy9jb25zdCBzZXNzaW9uaWQgPSBzZXNzaW9uSWQgfHwgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnc2Vzc2lvbklkJyk7XHJcbiAgICAgIGlmICghYm9keSkgeyB0aHJvdyBuZXcgRXJyb3IoJ0JvZHkgaXMgcmVxdWlyZWQnKTsgfVxyXG4gICAgICBjb25zdCBkYXRhOiBhbnkgPSB7XHJcbiAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICBvcmdhbmlzYXRpb25JZDogb3JnYW5pc2F0aW9uaWQsXHJcbiAgICAgICAgICBjbGllbnRfaWQ6IGNsaWVudElkLFxyXG4gICAgICAgICAgY2xpZW50X3NlY3JldDogY2xpZW50U2VjcmV0LFxyXG4gICAgICAgICAgYXBwSWRlbnRpZmllcjogYCR7YXBwSWRlbnRpZmllcn1gLFxyXG4gICAgICAgICAgXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgYm9keTogYm9keSA/IGJvZHkgOiBudWxsXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAucmVxdWVzdCgnUE9TVCcsIHRoaXMudXJsICsgQVBJTkFNRS52ZXJpZnlQcm9maWxlVnVhLCBkYXRhKVxyXG4gICAgICAgIC5waXBlKFxyXG4gICAgICAgICAgbWFwKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlOiBhbnkgPSByZXM7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiBvZihlcnJvcik7XHJcbiAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAqIEFjY291bnQgZGlzY292ZXJ5IEFQSVxyXG4gICAqIEBwYXJhbSBib2R5XHJcbiAgICogQHBhcmFtIHNlc3Npb25JZFxyXG4gICAqL1xyXG4gIGRpc2NvdmVyQWNjb3VudEZJUChpZGVudGlmaWVyOiB7IGNhdGVnb3J5OiBzdHJpbmcsIHR5cGU6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9W10sZmlwSWQ/OiBzdHJpbmcsIHNlc3Npb25JZD86IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCFpZGVudGlmaWVyKSB7IHRocm93IG5ldyBFcnJvcignSWRlbnRpZmllciBpcyByZXF1aXJlZCcpOyB9XHJcbiAgICAgIGNvbnN0IHNlc3Npb25JRCA9IHNlc3Npb25JZCB8fCBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdzZXNzaW9uSWQnKTtcclxuICAgICAgaWYgKCFzZXNzaW9uSUQpIHsgdGhyb3cgbmV3IEVycm9yKCdTZXNzaW9uIElkIGlzIHJlcXVpcmVkJyk7IH1cclxuICAgICAgY29uc3QgaGVhZGVyID0gbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIHNlc3Npb25JZDogYCR7c2Vzc2lvbklEfWBcclxuICAgICAgfSk7XHJcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgdXJsOiBgJHt0aGlzLnVybH0ke0FQSU5BTUUuYWNjb3VudGRpc2NvdmVyfWAsXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IGRhdGE6IGFueSA9IHtcclxuICAgICAgICBoZWFkZXJzOiBoZWFkZXIsXHJcbiAgICAgICAgYm9keToge1xyXG4gICAgICAgICAgaWRlbnRpZmllcnM6IFt7XHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiBgJHtpZGVudGlmaWVyWzBdLmNhdGVnb3J5fWAsIHR5cGU6IGAke2lkZW50aWZpZXJbMF0udHlwZX1gLFxyXG4gICAgICAgICAgICB2YWx1ZTogYCR7aWRlbnRpZmllclswXS52YWx1ZX1gXHJcbiAgICAgICAgICB9XSwgZmlwSWQ6IGAke2ZpcElkfWBcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAucmVxdWVzdChvcHRpb25zLm1ldGhvZCwgb3B0aW9ucy51cmwsIGRhdGEpXHJcbiAgICAgICAgLnBpcGUoXHJcbiAgICAgICAgICBtYXAocmVzID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2U6IGFueSA9IHJlcztcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIG9mKGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcbiJdfQ==