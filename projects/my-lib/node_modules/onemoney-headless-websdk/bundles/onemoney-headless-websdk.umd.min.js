!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common/http"),require("@angular/core"),require("rxjs/operators"),require("rxjs")):"function"==typeof define&&define.amd?define("onemoney-headless-websdk",["exports","@angular/common/http","@angular/core","rxjs/operators","rxjs"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["onemoney-headless-websdk"]={},e.ng.common.http,e.ng.core,e.rxjs.operators,e.rxjs)}(this,(function(e,t,r,n,o){"use strict";var s=function(){this.apiUrl="https://api-sandbox.onemoney.in/",this.uatUrl="https://app-uat.onemoney.in/",this.prodUrl="https://aa-app.onemoney.in/",this.devUrl="https://dev-aa-app.aws.onemoney.in/",this.omApiUrl="",this.enableDebug=!0};s.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new s},token:s,providedIn:"root"}),s.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],s.ctorParameters=function(){return[]};var i="user/user-profile",a="sdk/api/v1/accounts/discover",p="sdk/api/v1/account/auth/trigger",u="sdk/api/v1/account/auth/verify",d="app/loginwithotp/verify",c="sdk/api/v1/linkedaccount/list",h="sdk/api/v1/discoveredaccount/list",l="user/logout",f="app/loginwithotp/send",y="app/otp/send",I="user/verifyvua",m="user/sdksignupwithotp/send",v="user/sdksignupwithotp/verify",w="sdk/api/v1/session/init",g="app/fip",S="app/dashboard",T="sdk/api/v1/bulkconsent/info",q="sdk/api/v1/consentwithauth/allow",H="sdk/api/v1/consentwithauth/deny",b="sdk/api/v1/consent/allow",j="sdk/api/v1/consent/deny",E="sdk/api/v1/bulkaccount/auth/trigger",O="app/otp/validate",C="user/verifyprofile",P="sdk/api/v1/accounts/discover/multiplefips",k=function(){function e(e,t){this.http=e,this.envService=t,this.url=this.envService.uatUrl}return e.prototype.discoverAccount=function(e,r,s){try{if(!e&&!r)throw new Error("Flip Id && Identifier is required");var i=s||sessionStorage.getItem("sessionId");if(!i)throw new Error("Session Id is required");var p=new t.HttpHeaders({"Content-Type":"application/json",sessionId:""+i}),u={method:"POST",url:""+this.url+a},d={headers:p,body:{identifiers:[{category:""+r[0].category,type:""+r[0].type,value:""+r[0].value}],fipId:""+e}};return this.http.request(u.method,u.url,d).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e.prototype.getUserProfile=function(e){try{var r=e||sessionStorage.getItem("sessionId");if(!r)throw new Error("Session Id is required");var s=new t.HttpHeaders({"Content-Type":"application/json",sessionId:""+r}),a={method:"GET",url:""+this.url+i},p={headers:s};return this.http.request(a.method,a.url,p).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e.prototype.accountAuth=function(e,r){try{if(!e)throw new Error("Account is required");var s=r||sessionStorage.getItem("sessionId");if(!s)throw new Error("Session Id is required");var i=new t.HttpHeaders({"Content-Type":"application/json",sessionId:""+s}),a={method:"POST",url:""+this.url+p},u={headers:i,body:{account:{type:""+e.type,data:{accType:""+e.data.accType,accRefNumber:""+e.data.accRefNumber,maskedAccNumber:""+e.data.maskedAccNumber,fiId:""+e.data.fipId,userInfo:""+e.data.userInfo}}}};return this.http.request(a.method,a.url,u).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e.prototype.accountVerify=function(e,r,s){try{var i=s||sessionStorage.getItem("sessionId");if(!i)throw new Error("Session Id is required");var a=new t.HttpHeaders({"Content-Type":"application/json",sessionId:""+i}),p={method:"POST",url:""+this.url+u},d={headers:a,body:{refNumber:""+e,authToken:""+r}};return this.http.request(p.method,p.url,d).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e.prototype.loginOTP=function(e,r,s,i,a){try{if(!e)throw new Error("organisationId is required");var p=new t.HttpHeaders({"Content-Type":"application/json",organisationId:""+e,client_id:""+r,client_secret:""+s,appIdentifier:""+i}),u={method:"POST",url:""+this.url+f},d={headers:p,body:{phone_number:""+a}};return this.http.request(u.method,u.url,d).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e.prototype.loginOTPVerify=function(e,r,s,i,a,p,u){try{if(!e)throw new Error("Session Id is required");var c=new t.HttpHeaders({"Content-Type":"application/json",organisationId:""+e,client_id:""+r,client_secret:""+s,appIdentifier:""+i}),h={method:"POST",url:""+this.url+d},l={headers:c,body:{phone_number:""+a,otp_reference:""+p,code:""+u}};return this.http.request(h.method,h.url,l).pipe(n.map((function(e){var t=e;return t.sessionId&&sessionStorage.setItem("sessionId",t.sessionId),t})))}catch(e){return o.of(e)}},e.prototype.getListOfLinkedAccounts=function(e){try{var r=e||sessionStorage.getItem("sessionId");if(!r)throw new Error("Session Id is required");var s=new t.HttpHeaders({"Content-Type":"application/json",sessionId:""+r}),i={method:"GET",url:""+this.url+c},a={headers:s};return this.http.request(i.method,i.url,a).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e.prototype.getDiscoveredAccountList=function(e){try{var r=e||sessionStorage.getItem("sessionId");if(!r)throw new Error("Session Id is required");var s=new t.HttpHeaders({"Content-Type":"application/json",sessionId:""+r}),i={method:"GET",url:""+this.url+h},a={headers:s};return this.http.request(i.method,i.url,a).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e.prototype.logout=function(e){try{var r=e||sessionStorage.getItem("sessionId");if(!r)throw new Error("Session Id is required");var s=new t.HttpHeaders({"Content-Type":"application/json",sessionId:""+r}),i={method:"POST",url:""+this.url+l},a={headers:s};return this.http.request(i.method,i.url,a).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e.prototype.verifyVua=function(e,r,s,i,a){try{if(!(e&&r&&s&&a))throw new Error("All parameters are required");var p={headers:new t.HttpHeaders({"Content-Type":"application/json",organisationId:e,client_id:r,client_secret:s,appIdentifier:""+i}),body:a||null};return this.http.request("POST",this.url+I,p).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e.prototype.userRegistration=function(e,r,s,i,a){try{if(!(e&&r&&s&&a))throw new Error("All parameters are required");var p={headers:new t.HttpHeaders({"Content-Type":"application/json",organisationId:e,client_id:r,client_secret:s,appIdentifier:""+i}),body:a||null};return this.http.request("POST",this.url+m,p).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e.prototype.verifyOtp=function(e,r,s,i,a){try{if(!(e&&r&&s&&a))throw new Error("All parameters are required");var p={headers:new t.HttpHeaders({"Content-Type":"application/json",organisationId:e,client_id:r,client_secret:s,appIdentifier:""+i}),body:a||null};return this.http.request("POST",this.url+v,p).pipe(n.map((function(e){var t=e;return t.status&&t.sessionId&&sessionStorage.setItem("sessionId",t.sessionId),t})))}catch(e){return o.of(e)}},e.prototype.registerAsCorpUser=function(e){try{if(!e)throw new Error("All parameters are required");var r={headers:new t.HttpHeaders({"Content-Type":"application/json"}),body:e||null};return this.http.request("POST",this.url+w,r).pipe(n.map((function(e){var t=e;return"SUCCESS"===t.status&&t.sessionToken&&sessionStorage.setItem("sessionToken",t.sessionToken),t})))}catch(e){return o.of(e)}},e.prototype.getFipList=function(e){try{var r=e||sessionStorage.getItem("sessionId");if(!r)throw new Error("Session Id is required");var s={headers:new t.HttpHeaders({"Content-Type":"application/json",sessionId:r})};return this.http.request("GET",this.url+g,s).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e.prototype.customerDashboard=function(e){try{var r=e||sessionStorage.getItem("sessionId");if(!r)throw new Error("Session Id is required");var s={headers:new t.HttpHeaders({"Content-Type":"application/json",sessionId:r})};return this.http.request("GET",this.url+S,s).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e.prototype.getConsentDetails=function(e,r){try{var s=r||sessionStorage.getItem("sessionId");if(!s||!e)throw new Error("Session Id is required");var i={headers:new t.HttpHeaders({"Content-Type":"application/json",sessionId:s}),body:e||null};return this.http.request("POST",this.url+T,i).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e.prototype.approve=function(e,r){try{var s=r||sessionStorage.getItem("sessionId");if(!s||!e)throw new Error("Session Id is required");var i={headers:new t.HttpHeaders({"Content-Type":"application/json",sessionId:s}),body:e||null};return this.http.request("POST",this.url+q,i).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e.prototype.reject=function(e,r){try{var s=r||sessionStorage.getItem("sessionId");if(!s||!e)throw new Error("Session Id is required");var i={headers:new t.HttpHeaders({"Content-Type":"application/json",sessionId:s}),body:e||null};return this.http.request("POST",this.url+H,i).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e.prototype.consentOTP=function(e,r){try{var s=r||sessionStorage.getItem("sessionId");if(!s||!e)throw new Error("Session Id is required");var i={headers:new t.HttpHeaders({"Content-Type":"application/json",sessionId:s}),body:e||null};return this.http.request("POST",this.url+y,i).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e.prototype.consentAllow=function(e,r){try{var s=r||sessionStorage.getItem("sessionId");if(!s||!e)throw new Error("Session Id is required");var i={headers:new t.HttpHeaders({"Content-Type":"application/json",sessionId:s}),body:e||null};return this.http.request("POST",this.url+b,i).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e.prototype.consentDeny=function(e,r){try{var s=r||sessionStorage.getItem("sessionId");if(!s||!e)throw new Error("Session Id is required");var i={headers:new t.HttpHeaders({"Content-Type":"application/json",sessionId:s}),body:e||null};return this.http.request("POST",this.url+j,i).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e.prototype.multiAccountlink=function(e,r){try{var s=r||sessionStorage.getItem("sessionId");if(!s||!e)throw new Error("Session Id is required");var i={headers:new t.HttpHeaders({"Content-Type":"application/json",sessionId:s}),body:e||null};return this.http.request("POST",this.url+E,i).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e.prototype.identifierGenerateOTP=function(e,r){try{var s=r||sessionStorage.getItem("sessionId");if(!s||!e)throw new Error("Session Id is required");var i={headers:new t.HttpHeaders({"Content-Type":"application/json",sessionId:s}),body:e?Object.assign({actionType:"VERIFY_IDENTIFIER"},e):null};return this.http.request("POST",this.url+y,i).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e.prototype.identifierVerifyOTP=function(e,r){try{var s=r||sessionStorage.getItem("sessionId");if(!s||!e)throw new Error("Session Id is required");var i={headers:new t.HttpHeaders({"Content-Type":"application/json",sessionId:s}),body:e?Object.assign({actionType:"VERIFY_IDENTIFIER"},e):null};return this.http.request("POST",this.url+O,i).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e.prototype.verifyOnemoneyProfile=function(e,r,s,i,a){try{if(!a)throw new Error("Body is required");var p={headers:new t.HttpHeaders({"Content-Type":"application/json",organisationId:e,client_id:r,client_secret:s,appIdentifier:""+i}),body:a||null};return this.http.request("POST",this.url+C,p).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e.prototype.discoverAccountFIP=function(e,r,s){try{if(!e)throw new Error("Identifier is required");var i=s||sessionStorage.getItem("sessionId");if(!i)throw new Error("Session Id is required");var a=new t.HttpHeaders({"Content-Type":"application/json",sessionId:""+i}),p={method:"POST",url:""+this.url+P},u={headers:a,body:{identifiers:[{category:""+e[0].category,type:""+e[0].type,value:""+e[0].value}],fipId:""+r}};return this.http.request(p.method,p.url,u).pipe(n.map((function(e){return e})))}catch(e){return o.of(e)}},e}();k.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new k(r.ɵɵinject(t.HttpClient),r.ɵɵinject(s))},token:k,providedIn:"root"}),k.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],k.ctorParameters=function(){return[{type:t.HttpClient},{type:s}]},e.OnemoneyWebsdkService=k,e.ɵa=s,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=onemoney-headless-websdk.umd.min.js.map